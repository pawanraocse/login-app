# --- Application Name ---
spring.application.name=Login-App

# --- Server Port ---
server.port=8081

# --- Database (Postgres) ---
spring.datasource.url=jdbc:postgresql://localhost:5432/keycloak
spring.datasource.username=postgres
spring.datasource.password=postgres
spring.datasource.driver-class-name=org.postgresql.Driver
spring.datasource.hikari.maximum-pool-size=10
spring.jpa.database-platform=org.hibernate.dialect.PostgreSQLDialect
spring.jpa.hibernate.ddl-auto=validate
spring.jpa.show-sql=false
spring.jpa.properties.hibernate.format_sql=true

# --- Flyway (DB Migration) ---
spring.flyway.enabled=false

# --- Keycloak Integration ---
keycloak.auth-server-url=${KEYCLOAK_URL:http://localhost:8080}
keycloak.realm=${KEYCLOAK_REALM:dev-realm}
keycloak.resource=${KEYCLOAK_CLIENT:dev-client}
keycloak.credentials.secret=${KEYCLOAK_SECRET:dev-secret}
keycloak.ssl-required=external
keycloak.public-client=true
keycloak.use-resource-role-mappings=true
keycloak.bearer-only=false

# --- Security ---
spring.security.oauth2.resourceserver.jwt.issuer-uri=${KEYCLOAK_URL:http://localhost:8080}/realms/${KEYCLOAK_REALM:dev-realm}
spring.security.oauth2.resourceserver.jwt.jwk-set-uri=${KEYCLOAK_URL:http://localhost:8080}/realms/${KEYCLOAK_REALM:dev-realm}/protocol/openid-connect/certs

# --- Logging ---
logging.level.root=INFO
logging.level.org.springframework.security=INFO
logging.pattern.level=%5p [userId:%X{userId} requestId:%X{requestId} op:%X{operation}]

# --- Actuator ---
management.endpoints.web.exposure.include=health,info,metrics,prometheus
management.endpoint.health.show-details=always

# --- CORS (for local dev) ---
spring.web.cors.allowed-origins=http://localhost:4200,http://localhost:3000
spring.web.cors.allowed-methods=GET,POST,PUT,PATCH,DELETE,OPTIONS
spring.web.cors.allowed-headers=*

# --- Tenant Resolver (custom, for future use) ---
app.tenant.resolver.header=X-Tenant-Id

# --- Notes ---
# Use Docker Compose env overrides for DB/Keycloak secrets in production.
# See login_auth_service_requirements.md for full architecture and flows.

# Keycloak Admin API configuration
keycloak.admin.url=http://localhost:8080
keycloak.admin.username=admin
keycloak.admin.password=admin
